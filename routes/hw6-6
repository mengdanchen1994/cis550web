var mapFunction = function(){
	emit(this.category, 
	{
	count:1, 
	max: this.laureates.length, 
	min: this.laureates.length, 
	total: this.laureates.length
	}
	);
};

var reduceFunction = function(key, value){
reduceVal = {count: 0, max:Number.MIN_VALUE, min: Number.MAX_VALUE,total:0};
	for(var idx = 0; idx <value.length; idx++){
		reduceVal.count += value[idx].count;
		reduceVal.total += value[idx].total;
		if(reduceVal.max < value[idx].max){
			reduceVal.max = value[idx].max;
		}
		if(reduceVal.min > value[idx].min){
			reduceVal.min = value[idx].min;
		}
}
return reduceVal;
};


var finalizeFunction = function(key, reduceVal){
return {
     "average": reduceVal.total / reduceVal.count,
     "max": reduceVal.max,
     "min": reduceVal.min
    };
};

db.prizes.mapReduce(mapFunction, reduceFunction, {
out: {inline:1},
query:{},
finalize:finalizeFunction
});